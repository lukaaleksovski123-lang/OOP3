#include <bits/stdc++.h>
using namespace std;

struct Color {
    int R, G, B;
};

int lerp_int(int a, int b, double t) {
    return int(round(a * (1.0 - t) + b * t));
}

Color lerp_color(const Color& c1, const Color& c2, double t) {
    return {
        lerp_int(c1.R, c2.R, t),
        lerp_int(c1.G, c2.G, t),
        lerp_int(c1.B, c2.B, t)
    };
}

int main(int argc, char** argv) {
    const int width  = 800;
    const int height = 600;

    Color outer = {128, 0, 128};
    Color inner = {255, 0, 0};

    const string filename = "gradient.ppm";
    ofstream fout(filename);
    if (!fout) {
        cerr << "Не можам да отворам " << filename << " за пишување\n";
        return 1;
    }

    fout << "P3\n" << width << " " << height << "\n255\n";

    const double cx = width / 2.0;
    const double cy = height / 2.0;
    const double maxDist = sqrt(cx*cx + cy*cy);

    for (int y = 0; y < height; ++y) {
        for (int x = 0; x < width; ++x) {
            double dx = x - cx;
            double dy = y - cy;
            double dist = sqrt(dx*dx + dy*dy);
            double t = dist / maxDist;
            if (t > 1.0) t = 1.0;

            Color pixel = lerp_color(inner, outer, t);
            fout << pixel.R << " " << pixel.G << " " << pixel.B << "  ";
        }
        fout << "\n";
    }

    fout.close();
    cout << "Градиент слика е сочувана во \"" << filename << "\"\n";
    return 0;
}
